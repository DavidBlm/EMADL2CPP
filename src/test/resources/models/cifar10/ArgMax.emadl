package cifar10;

component ArgMax<Z(1:oo) n = 2>{
    ports in Q^{n} inputVector,
          out Z(0:oo) maxIndex;

    implementation Math{
         maxIndex = 0;
         Q maxValue = inputVector(0); //should be inputVector(1) but bug in EMAM2CPP

         for i = 2:n //should be 2:n but bug in EMAM2CPP
            if inputVector(i) > maxValue
                maxIndex = i - 1;
                maxValue = inputVector(i);
            end
         end
    }

}