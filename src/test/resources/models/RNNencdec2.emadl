component RNNencdec2{
   ports in Z(0:29999)^{75} source,
        out Z(0:29999)^{1} target[91];

   implementation CNN{

     layer LSTM(units=10) encoder;

     source ->
     Embedding(output_dim=10) ->
     encoder;

     layer LSTM(units=10) decoder;

     1 -> target[0];

     encoder.state -> decoder.state;

     timed<t> GreedySearch(max_length=91) {
         target[t-1] ->
         Embedding(output_dim=10) ->
         decoder ->
         FullyConnected(units=30) ->
         Softmax() ->
         ArgMax() ->
         target[t]
     };

       }
 }
